.. _yasara_refine:

YasaraRefine
==========================

This module refines structures of conformers by calling `YASARA structure <http://www.yasara.org/>`_. YASARA structure requires a paid license.
The MMMx wrapper automates refinement of conformers in ensembles and cleans up YASARA output PDB files. The feature emulates the Minimization Server of YASARA.

YasaraRefine can have an input argument:

.. code-block:: matlab

    !yasara [maxtime]

Arguments
    *   ``maxtime`` - maximum computation time for a single model in hours, defaults to 1  
Remarks
    *   since the Yasara jobs cannot be killed from within Matlab, too short maximum times can result in too many parallel processes, which may slow down the computer

``addpdb``
---------------------------------

Input of template conformers from PDB files. 

.. code-block:: matlab

    addpdb file identifier

Arguments
    *   ``file`` - file name, can contain wildcards
    *   ``identifier`` - module-internal identifier for the ensemble, e.g. 'ensemble_1'
Remarks
    *   use wildcard '*' for part of the filename to process all conformers from a previous step in the pipeline 
    *   individual PDB files can contain a single model or several models; this can be freely mixed
    *   use this if you want to refine raw conformers after Flex or FlexRNA calls
	
``console``
---------------------------------

Requests that Yasara is run in console mode. 

.. code-block:: matlab

    console

Remarks
    *   by default, Yasara is run with full display
    *   for long production runs and for running on a server, console mode saves resources
		
``getens``
---------------------------------

Input of template conformers from PDB files. 

.. code-block:: matlab

    getens file identifier

Arguments
    *   ``file`` - name of an MMMx ensemble file list (extension '.ens' or '.zip')
    *   ``identifier`` - module-internal identifier for the ensemble, e.g. 'ensemble_2'
Remarks
    *   use this for refining conformers in an ensemble generated by the EnsembleFit module
    *   if it is affordbale, it is better to refine the raw ensemble before calling the the EnsembleFit module
    *   ``getens`` can also read zipped ensemble archives, as generated by the ``archive`` keyword in EnsembleAnalysis

``getpdb``
---------------------------------

Input of a template by reading a single local PDB file or retrieving a PDB structure from a server. 

.. code-block:: matlab

    getpdb file

Arguments
    *   ``file`` - file name or PDB identifier, must have extension '.pdb' if it specifies a file
Remarks
    *   if the template has several conformers, the first one is used
	
``repack``
---------------------------------

Requests sidechain repacking by SCWRL4 before calling Yasara. 

.. code-block:: matlab

    repack

Remarks
    *   use this if SCWRL4 is available and quality of input conformers might be poor
    *   this is much faster than Yasara, if SCWRL4 is available, it is never wrong to specify this option

``save``
---------------------------------

Specifies name for saving an output ensemble list 

.. code-block:: matlab

    save file

Arguments
    *   ``file`` - file name four output ensemble list 
Remarks
    *   extension '.ens' is appended
    *   this has only an effect, if input is an ensemble (key ``getens`` was used)
		
